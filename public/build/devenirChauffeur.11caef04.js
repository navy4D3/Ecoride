"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[468,609],{9:(e,t,n)=>{var c=n(28),r=n(902),o=n(115),u=document.getElementById("devenir-chauffeur-form");u.querySelectorAll("input, select, textarea").forEach((function(e){e.addEventListener("input",(function(){return(0,c.checkInputs)(u)}))}));(0,o.D)([]);var d=document.getElementById("devenir_chauffeur_hasVoiture");document.querySelectorAll(".voiture-card").length>0&&(d.checked=!0,d.dispatchEvent(new Event("input",{bubbles:!0}))),document.getElementById("add-voiture-btn").addEventListener("click",(function(){(0,r.T8)("devenir-chauffeur-base")}))},115:(e,t,n)=>{function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=document.querySelectorAll(".preference"),n=document.getElementById("devenir_chauffeur_preferences");e.length&&e.forEach((function(e){document.getElementById(e).classList.add("active")})),n.value=e.length?JSON.stringify(e):"",t.forEach((function(t){t.addEventListener("click",(function(c){c.preventDefault(),this.classList.toggle("active");var r=e.indexOf(t.id);-1===r?e.push(t.id):e.splice(r,1),n.value=e.length?JSON.stringify(e):"",n.dispatchEvent(new Event("input",{bubbles:!0}))}))}))}n.d(t,{D:()=>c})},902:(e,t,n)=>{n.d(t,{T8:()=>d,d8:()=>u});var c=n(28);function r(){var e=document.getElementById("add_voiture_marque"),t=document.getElementById("suggestions-marque-box"),n=JSON.parse(e.dataset.marqueList);e.addEventListener("input",(function(){var c=this.value.toLowerCase(),r=n.filter((function(e){return e.toLowerCase().includes(c)})).slice(0,10);t.innerHTML="",""!==c&&r.forEach((function(n){var c=document.createElement("li");c.textContent=n,c.style.cursor="pointer",c.onclick=function(){e.value=n,t.innerHTML=""},t.appendChild(c)}))}))}function o(e,t){var n=document.getElementById("add-voiture-section"),d=document.getElementById("add-voiture-form"),a=d.querySelectorAll("input, select, textarea");(0,c.checkInputs)(d),a.forEach((function(e){e.addEventListener("input",(function(){return(0,c.checkInputs)(d)}))})),document.getElementById("add-voiture-back-btn").addEventListener("click",(function(t){document.getElementById("add-voiture-section").style.display="none",document.getElementById(e).style.display="flex"})),document.getElementById("add_voiture_immatriculation").addEventListener("keydown",(function(e){" "===e.key&&e.preventDefault()}));var i=document.getElementById("add_voiture_couleur"),s=document.getElementById("color-view"),l={Blanc:"#ffffff",Noir:"#000000","Gris foncé":"#555555","Gris clair":"#d3d3d3",Rouge:"#ff0000",Bleu:"#0000ff",Vert:"#008000",Jaune:"#ffff00",Orange:"#ffa500",Marron:"#8b4513",Violet:"#800080",Beige:"#f5f5dc",Rose:"#ffc0cb"};function v(){var e=i.value;""===e?i.classList.add("select-color-placeholder"):i.classList.remove("select-color-placeholder"),s.style.backgroundColor=l[e]||"transparent"}i.addEventListener("change",v),v();var m=document.getElementById("add_voiture_places");m.addEventListener("input",(function(){var e=parseInt(this.value,10);isNaN(e)||(e<2?m.value=2:e>9&&(m.value=9))}));var f=document.getElementById("show-delete-voiture-popup");if(f){var p=document.getElementById("delete-voiture-popup"),h=document.getElementById("delete-voiture"),E=document.getElementById("add-voiture-form");f.addEventListener("click",(function(){(0,c.showPopup)(p,"flex")})),h.addEventListener("click",(function(r){r.preventDefault(),fetch("delete-voiture/"+t,{method:"POST",headers:{"X-Requested-With":"XMLHttpRequest"}}).then((function(e){if(!e.ok)throw new Error("Erreur HTTP : "+e.status);return e.json()})).then((function(r){r.status&&"success"==r.status?(document.getElementById(e).style.display="flex",document.getElementById(t).remove(),n.style.display="none",(0,c.showSuccessAlert)("Voiture supprimé avec succès"),u(e,t)):((0,c.treatFormAlert)(E,"",r),(0,c.hidePopup)(p))}))}))}document.getElementById("add-voiture-submit").addEventListener("click",(function(n){n.preventDefault(),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=document.getElementById("add-voiture-form"),d=new FormData(n),a=document.getElementById("add-voiture-section"),i=t?"/add-voiture?id=".concat(encodeURIComponent(t)):"/add-voiture";fetch(i,{method:"POST",body:d,headers:{"X-Requested-With":"XMLHttpRequest"}}).then((function(e){if(!e.ok)throw new Error("Erreur HTTP : "+e.status);return e.json()})).then((function(n){if(n.status&&"success"==n.status){document.getElementById(e).style.display="flex",a.style.display="none";var d=document.getElementById("user-voitures");if(t){document.getElementById(t).innerHTML='\n                    <span class="surnom">'.concat(n.voiture.surnom,'</span>\n                    <div>\n                        <span class="marque">').concat(n.voiture.marque,'</span>\n                        <span class="modele">').concat(n.voiture.modele,'</span>\n                        <span class="is-electric">').concat(n.voiture.isElectric?"Electrique":"Thermique",'</span>\n                        <span class="places fw-bold">').concat(n.voiture.places," place").concat(n.voiture.places>1?"s":"","</span>\n                    </div>\n                "),(0,c.showSuccessAlert)("Voiture modifié avec succès")}else{var i=document.createElement("div");i.classList.add("voiture-card"),i.id=n.voiture.id,i.innerHTML='\n                    <span class="surnom">'.concat(n.voiture.surnom,'</span>\n                    <div>\n                        <span class="marque">').concat(n.voiture.marque,'</span>\n                        <span class="modele">').concat(n.voiture.modele,'</span>\n                        <span class="is-electric">').concat(n.voiture.isElectric?"Electrique":"Thermique",'</span>\n                        <span class="places fw-bold">').concat(n.voiture.places," place").concat(n.voiture.places>1?"s":"","</span>\n                    </div>\n                "),d.insertAdjacentElement("afterbegin",i),(0,c.showSuccessAlert)("Voiture ajouté avec succès")}u(e,t);var s=document.getElementById("devenir_chauffeur_hasVoiture"),l=document.querySelectorAll(".voiture-card");s&&l.length>0&&(s.checked=!0,s.dispatchEvent(new Event("input",{bubbles:!0})))}else{var v=document.getElementById("body-content");a.remove(),v.insertAdjacentHTML("beforeend",n.html),o(e,t),r()}}))}(e,t)}))}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=document.querySelectorAll(".voiture-card"),c=document.querySelector(".voiture-input");t||n.forEach((function(t){"true"!==t.dataset.listenerAttached&&t.addEventListener("click",(function(r){r.preventDefault();var o=t.id;n.forEach((function(e){return e.classList.remove("selected")})),this.classList.add("selected"),c.value=o;var u=new Event("input",{bubbles:!0});c.dispatchEvent(u),window.location.href.includes("publier-trajet")||d(e,t.id),t.dataset.listenerAttached="true"}))}))}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=document.getElementById("add-voiture-section");n&&n.remove(),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=t?"/add-voiture?id=".concat(encodeURIComponent(t)):"/add-voiture";fetch(n,{method:"POST",headers:{"X-Requested-With":"XMLHttpRequest"}}).then((function(e){return e.json()})).then((function(n){if(e){document.getElementById(e).style.display="none";var c=document.getElementById("body-content");if(c){if(c.insertAdjacentHTML("beforeend",n.html),r(),o(e,t),t){var u=document.getElementById(t);document.getElementById("add_voiture_marque").value=u.querySelector(".marque").innerHTML}}else console.error("Le container cible n'existe pas : body-content")}})).catch((function(e){return console.error("Erreur:",e)}))}(e,t)}}},e=>{e.O(0,[264,28],(()=>{return t=9,e(e.s=t);var t}));e.O()}]);