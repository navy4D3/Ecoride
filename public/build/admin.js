"use strict";
(self["webpackChunk"] = self["webpackChunk"] || []).push([["admin"],{

/***/ "./assets/js/admin.js":
/*!****************************!*\
  !*** ./assets/js/admin.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _app__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../app */ "./assets/app.js");

var prochainTrajeTChart = document.getElementById('prochains-trajet-chart');
if (prochainTrajeTChart) {
  var fetchData = function fetchData(days) {
    fetch("/admin/stats?days=".concat(days)).then(function (response) {
      return response.json();
    }).then(function (data) {
      var labels = data.trajetsAVenir.map(function (d) {
        return d.date;
      });
      var counts = data.trajetsAVenir.map(function (d) {
        return d.count;
      });
      var labelsCredits = data.creditsAVenir.map(function (d) {
        return d.date;
      });
      var countsCredits = data.creditsAVenir.map(function (d) {
        return d.count;
      });
      var greenBlackColor = '#386150';
      var greenMediumColor = '#EAFFF3';
      var blueBtnColor = '#37abc7';
      var greenBtnColor = '#58fea0';
      if (rideChart) {
        rideChart.data.labels = labels;
        rideChart.data.datasets[0].data = counts;
        rideChart.update();
        creditsChart.data.labels = labelsCredits;
        creditsChart.data.datasets[0].data = countsCredits;
        creditsChart.update();
      } else {
        var chartOptions = {
          plugins: {
            legend: {
              display: true,
              labels: {
                color: greenBlackColor,
                // ✅ Couleur du label dans la légende
                font: {
                  family: 'Josefin sans',
                  size: 18
                }
              }
            }
          },
          scales: {
            x: {
              ticks: {
                color: greenBlackColor,
                // Couleur du texte
                font: {
                  family: 'Nunito',
                  // Police (ou Google Fonts, ex: 'Poppins')
                  size: 14,
                  weight: 'bold'
                }
              },
              grid: {
                drawOnChartArea: true,
                // 👈 n'affiche pas les lignes verticales internes
                drawTicks: true,
                color: greenBlackColor,
                // Couleur de l’axe X
                borderColor: greenBlackColor,
                tickWidth: 1,
                lineWidth: function lineWidth(ctx) {
                  // Ne dessiner que le premier trait
                  return ctx.index === 0 ? 1 : 0;
                } // Épaisseur du trait X
              }
            },
            y: {
              beginAtZero: true,
              ticks: {
                stepSize: 1,
                // 👈 Forcer un pas de 1
                callback: function callback(value) {
                  if (Number.isInteger(value)) {
                    return value;
                  }
                },
                color: greenBlackColor,
                // Couleur du texte
                font: {
                  family: 'Nunito',
                  // Police (ou Google Fonts, ex: 'Poppins')
                  size: 14,
                  weight: 'bold'
                }
              },
              grid: {
                drawOnChartArea: true,
                // 👈 n'affiche pas les lignes verticales internes
                drawBorder: false,
                // 👈 garde l’axe Y
                drawTicks: true,
                display: true,
                color: greenBlackColor,
                // Couleur de l’axe X
                tickWidth: 1,
                lineWidth: function lineWidth(ctx) {
                  // Ne dessiner que le premier trait
                  return ctx.index === 0 ? 1 : 0;
                }
              }
            }
          }
        };
        rideChart = new Chart(ctx, {
          type: 'bar',
          data: {
            labels: labels,
            datasets: [{
              label: 'Nombre de trajet',
              data: counts,
              // backgroundColor: blueBtnColor,
              // borderColor: 'transparent',
              backgroundColor: greenBtnColor,
              borderColor: 'transparent',
              borderWidth: 2,
              borderRadius: 6
            }]
          },
          options: chartOptions
        });
        creditsChart = new Chart(ctx2, {
          type: 'bar',
          data: {
            labels: labels,
            datasets: [{
              data: countsCredits,
              label: 'Nombre de credits',
              backgroundColor: blueBtnColor,
              borderColor: 'transparent',
              borderWidth: 2,
              borderRadius: 6
            }]
          },
          options: chartOptions
        });
      }
    });
  };
  var adjustCanvasHeight = function adjustCanvasHeight() {
    var isSmallScreen = window.innerWidth < 512;
    var canvases = [document.getElementById('prochains-trajet-chart'), document.getElementById('credits-a-venir-chart')];
    canvases.forEach(function (canvas) {
      if (canvas) {
        canvas.height = isSmallScreen ? 300 : 300; // 📏 ajuste comme tu veux
      }
    });
  }; // Exécuter au chargement
  var ctx = document.getElementById('prochains-trajet-chart').getContext('2d');
  var ctx2 = document.getElementById('credits-a-venir-chart').getContext('2d');
  var rideChart;
  var creditsChart;
  document.getElementById('period-select').addEventListener('change', function (e) {
    fetchData(e.target.value);
  });

  // Initial load
  fetchData(7);
  adjustCanvasHeight();

  // Exécuter au redimensionnement
  window.addEventListener('resize', adjustCanvasHeight);
}
var searchInput = document.getElementById('search-input');

// Recherche en direct
if (searchInput) {
  var searchBtn = document.getElementById('search-btn');
  var form = document.getElementById('search-form');
  var usersTable = document.getElementById('users-table');
  searchInput.addEventListener('input', function () {
    var query = new URLSearchParams(new FormData(form)).toString();
    fetch("/admin/users-list?" + query, {
      headers: {
        'X-Requested-With': 'XMLHttpRequest'
      }
    }).then(function (res) {
      return res.text();
    }).then(function (html) {
      usersTable.innerHTML = html;
    });
  });

  // Pagination AJAX
  usersTable.addEventListener('click', function (e) {
    if (e.target.tagName === 'A' && e.target.closest('.pagination')) {
      e.preventDefault();
      fetch(e.target.href, {
        headers: {
          'X-Requested-With': 'XMLHttpRequest'
        }
      }).then(function (res) {
        return res.text();
      }).then(function (html) {
        usersTable.innerHTML = html;
      });
    }
  });
  usersTable.addEventListener('click', function (e) {
    var row = e.target.closest('.clickable-row');
    if (row && row.dataset.href) {
      window.location.href = row.dataset.href;
    }
  });
}
var adminEditUserForm = document.getElementById('admin-edit-user-form');
if (adminEditUserForm) {
  var inputs = adminEditUserForm.querySelectorAll('input, select, textarea');
  var editBtn = document.getElementById('admin-edit-user-btn');
  inputs.forEach(function (input) {
    input.addEventListener('input', function () {
      editBtn.classList.remove('inactive');
    });
  });
  editBtn.addEventListener('click', function (e) {
    e.preventDefault();
    var formData = new FormData(adminEditUserForm);
    var urlParams = new URLSearchParams(window.location.search);
    var id = urlParams.get('id');
    fetch('/admin/user?id=' + id, {
      method: 'POST',
      body: formData,
      headers: {
        'X-Requested-With': 'XMLHttpRequest' // important pour indiquer une requête AJAX
      }
    }).then(function (response) {
      if (!response.ok) {
        throw new Error('Erreur réseau');
      }
      return response.json();
    }).then(function (data) {
      // data.html contient ton formulaire rendu

      (0,_app__WEBPACK_IMPORTED_MODULE_0__.treatFormAlert)(adminEditUserForm, 'Informations mises à jour avec succès', data);
      if (data.status !== "success") {
        adminEditUserForm.reset();
      }
      // const event = new Event('input', {
      //     bubbles: true,
      // });

      // passwordInput.dispatchEvent(event);
    })["catch"](function (error) {
      return console.error('Erreur:', error);
    });
  });
  var resetProfilPictureBtn = document.getElementById('reset-user-photo-profil-btn');
  if (resetProfilPictureBtn) {
    var profilPictureImg = document.getElementById('profil-picture-img');
    resetProfilPictureBtn.addEventListener('click', function (e) {
      profilPictureImg.src = '/default-profil-picture.png';
      e.preventDefault();
      var formData = new FormData(adminEditUserForm);
      var urlParams = new URLSearchParams(window.location.search);
      var id = urlParams.get('id');
      fetch('/user/reset-photo-profil?id=' + id, {
        method: 'POST',
        body: formData,
        headers: {
          'X-Requested-With': 'XMLHttpRequest' // important pour indiquer une requête AJAX
        }
      }).then(function (response) {
        if (!response.ok) {
          throw new Error('Erreur réseau');
        }
        return response.json();
      }).then(function (data) {
        // data.html contient ton formulaire rendu

        (0,_app__WEBPACK_IMPORTED_MODULE_0__.treatFormAlert)(adminEditUserForm, 'Photo de profil réinitialisé.', data);
        if (data.status !== "success") {
          adminEditUserForm.reset();
          profilPictureImg.src = '/default-profil-picture.png';
        }
        resetProfilPictureBtn.remove();
        // const event = new Event('input', {
        //     bubbles: true,
        // });

        // passwordInput.dispatchEvent(event);
      })["catch"](function (error) {
        return console.error('Erreur:', error);
      });
    });
  }
  var deleteUserBtn = document.getElementById('delete-user-btn');
  var deleteUserPopup = document.getElementById('delete-user-popup');
  deleteUserBtn.addEventListener('click', function (e) {
    (0,_app__WEBPACK_IMPORTED_MODULE_0__.showPopup)(deleteUserPopup, 'flex');
  });
  var hideDeleteUserPopupBtn = deleteUserPopup.querySelector('.back');
  hideDeleteUserPopupBtn.addEventListener('click', function () {
    (0,_app__WEBPACK_IMPORTED_MODULE_0__.hidePopup)(deleteUserPopup);
  });
}
var adminAddEmployeForm = document.getElementById('admin-add-employe-form');
if (adminAddEmployeForm) {
  var adminAddEmployeFormInputs = adminAddEmployeForm.querySelectorAll('input');
  adminAddEmployeFormInputs.forEach(function (input) {
    input.addEventListener('input', function () {
      (0,_app__WEBPACK_IMPORTED_MODULE_0__.checkInputs)(adminAddEmployeForm);
    });
  });
}

/***/ })

},
/******/ __webpack_require__ => { // webpackRuntimeModules
/******/ var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
/******/ __webpack_require__.O(0, ["assets_styles_app_scss","assets_app_js"], () => (__webpack_exec__("./assets/js/admin.js")));
/******/ var __webpack_exports__ = __webpack_require__.O();
/******/ }
]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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RSwrQ0FBUyxDQUFDMkgsZUFBZSxFQUFFLE1BQU0sQ0FBQztFQUN0QyxDQUFDLENBQUM7RUFFRixJQUFNQyxzQkFBc0IsR0FBR0QsZUFBZSxDQUFDRSxhQUFhLENBQUMsT0FBTyxDQUFDO0VBRXJFRCxzQkFBc0IsQ0FBQ2hELGdCQUFnQixDQUFDLE9BQU8sRUFBRSxZQUFXO0lBQ3hEN0UsK0NBQVMsQ0FBQzRILGVBQWUsQ0FBQztFQUM5QixDQUFDLENBQUM7QUFFVjtBQUVBLElBQU1HLG1CQUFtQixHQUFHM0gsUUFBUSxDQUFDQyxjQUFjLENBQUMsd0JBQXdCLENBQUM7QUFFN0UsSUFBSTBILG1CQUFtQixFQUFFO0VBQ3JCLElBQU1DLHlCQUF5QixHQUFHRCxtQkFBbUIsQ0FBQ3pCLGdCQUFnQixDQUFDLE9BQU8sQ0FBQztFQUUvRTBCLHlCQUF5QixDQUFDdkQsT0FBTyxDQUFDLFVBQUMrQixLQUFLLEVBQUs7SUFDekNBLEtBQUssQ0FBQzNCLGdCQUFnQixDQUFDLE9BQU8sRUFBRSxZQUFXO01BQ3ZDOUUsaURBQVcsQ0FBQ2dJLG1CQUFtQixDQUFDO0lBQ3BDLENBQUMsQ0FBQztFQUNOLENBQUMsQ0FBQztBQUVOIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vYXNzZXRzL2pzL2FkbWluLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNoZWNrSW5wdXRzLCBoaWRlUG9wdXAsIHNob3dQb3B1cCwgdHJlYXRGb3JtQWxlcnQgfSBmcm9tIFwiLi4vYXBwXCI7XG5cbmNvbnN0IHByb2NoYWluVHJhamVUQ2hhcnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncHJvY2hhaW5zLXRyYWpldC1jaGFydCcpO1xuXG5cbmlmIChwcm9jaGFpblRyYWplVENoYXJ0KSB7XG4gICAgY29uc3QgY3R4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2NoYWlucy10cmFqZXQtY2hhcnQnKS5nZXRDb250ZXh0KCcyZCcpO1xuICAgIGNvbnN0IGN0eDIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3JlZGl0cy1hLXZlbmlyLWNoYXJ0JykuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICBsZXQgcmlkZUNoYXJ0O1xuICAgIGxldCBjcmVkaXRzQ2hhcnQ7XG5cbiAgICBmdW5jdGlvbiBmZXRjaERhdGEoZGF5cykge1xuICAgICAgICBmZXRjaChgL2FkbWluL3N0YXRzP2RheXM9JHtkYXlzfWApXG4gICAgICAgIC50aGVuKHJlc3BvbnNlID0+IHJlc3BvbnNlLmpzb24oKSlcbiAgICAgICAgLnRoZW4oZGF0YSA9PiB7XG4gICAgICAgICAgICBjb25zdCBsYWJlbHMgPSBkYXRhLnRyYWpldHNBVmVuaXIubWFwKGQgPT4gZC5kYXRlKTtcbiAgICAgICAgICAgIGNvbnN0IGNvdW50cyA9IGRhdGEudHJhamV0c0FWZW5pci5tYXAoZCA9PiBkLmNvdW50KTtcbiAgICBcbiAgICAgICAgICAgIGNvbnN0IGxhYmVsc0NyZWRpdHMgPSBkYXRhLmNyZWRpdHNBVmVuaXIubWFwKGQgPT4gZC5kYXRlKTtcbiAgICAgICAgICAgIGNvbnN0IGNvdW50c0NyZWRpdHMgPSBkYXRhLmNyZWRpdHNBVmVuaXIubWFwKGQgPT4gZC5jb3VudCk7XG4gICAgICAgICAgICBjb25zdCBncmVlbkJsYWNrQ29sb3IgPSAgJyMzODYxNTAnO1xuICAgICAgICAgICAgY29uc3QgZ3JlZW5NZWRpdW1Db2xvciA9ICAnI0VBRkZGMyc7XG4gICAgICAgICAgICBjb25zdCBibHVlQnRuQ29sb3IgPSAgJyMzN2FiYzcnO1xuICAgICAgICAgICAgY29uc3QgZ3JlZW5CdG5Db2xvciA9ICAnIzU4ZmVhMCc7XG4gICAgXG4gICAgICAgICAgICBpZiAocmlkZUNoYXJ0KSB7XG4gICAgICAgICAgICAgICAgcmlkZUNoYXJ0LmRhdGEubGFiZWxzID0gbGFiZWxzO1xuICAgICAgICAgICAgICAgIHJpZGVDaGFydC5kYXRhLmRhdGFzZXRzWzBdLmRhdGEgPSBjb3VudHM7XG4gICAgICAgICAgICAgICAgcmlkZUNoYXJ0LnVwZGF0ZSgpO1xuICAgIFxuICAgICAgICAgICAgICAgIGNyZWRpdHNDaGFydC5kYXRhLmxhYmVscyA9IGxhYmVsc0NyZWRpdHM7XG4gICAgICAgICAgICAgICAgY3JlZGl0c0NoYXJ0LmRhdGEuZGF0YXNldHNbMF0uZGF0YSA9IGNvdW50c0NyZWRpdHM7XG4gICAgICAgICAgICAgICAgY3JlZGl0c0NoYXJ0LnVwZGF0ZSgpO1xuICAgICAgICAgICAgXG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNoYXJ0T3B0aW9ucyA9IHtcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGVnZW5kOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbHM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IGdyZWVuQmxhY2tDb2xvciwgLy8g4pyFIENvdWxldXIgZHUgbGFiZWwgZGFucyBsYSBsw6lnZW5kZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYW1pbHk6ICdKb3NlZmluIHNhbnMnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZTogMTgsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBzY2FsZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHg6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWNrczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogZ3JlZW5CbGFja0NvbG9yLCAgICAgICAgICAgLy8gQ291bGV1ciBkdSB0ZXh0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmb250OiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmYW1pbHk6ICdOdW5pdG8nLCAgICAgICAgICAvLyBQb2xpY2UgKG91IEdvb2dsZSBGb250cywgZXg6ICdQb3BwaW5zJylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNpemU6IDE0LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2VpZ2h0OiAnYm9sZCdcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ3JpZDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcmF3T25DaGFydEFyZWE6IHRydWUsIC8vIPCfkYggbidhZmZpY2hlIHBhcyBsZXMgbGlnbmVzIHZlcnRpY2FsZXMgaW50ZXJuZXNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhd1RpY2tzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogZ3JlZW5CbGFja0NvbG9yLCAgICAgLy8gQ291bGV1ciBkZSBs4oCZYXhlIFhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyQ29sb3IgOiBncmVlbkJsYWNrQ29sb3IsXG4gICAgXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpY2tXaWR0aDogMSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZVdpZHRoOiAoY3R4KSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5lIGRlc3NpbmVyIHF1ZSBsZSBwcmVtaWVyIHRyYWl0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBjdHguaW5kZXggPT09IDAgPyAxIDogMDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSAgICAgICAgICAvLyDDiXBhaXNzZXVyIGR1IHRyYWl0IFhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHk6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiZWdpbkF0WmVybzogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aWNrczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdGVwU2l6ZTogMSwgLy8g8J+RiCBGb3JjZXIgdW4gcGFzIGRlIDFcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uKHZhbHVlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoTnVtYmVyLmlzSW50ZWdlcih2YWx1ZSkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IGdyZWVuQmxhY2tDb2xvciwgICAgICAgICAgIC8vIENvdWxldXIgZHUgdGV4dGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZm9udDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZmFtaWx5OiAnTnVuaXRvJywgICAgICAgICAgLy8gUG9saWNlIChvdSBHb29nbGUgRm9udHMsIGV4OiAnUG9wcGlucycpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzaXplOiAxNCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHdlaWdodDogJ2JvbGQnXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGdyaWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhd09uQ2hhcnRBcmVhOiB0cnVlLCAvLyDwn5GIIG4nYWZmaWNoZSBwYXMgbGVzIGxpZ25lcyB2ZXJ0aWNhbGVzIGludGVybmVzXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyYXdCb3JkZXI6IGZhbHNlLCAgICAgICAgLy8g8J+RiCBnYXJkZSBs4oCZYXhlIFlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJhd1RpY2tzOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogZ3JlZW5CbGFja0NvbG9yLCAgICAgLy8gQ291bGV1ciBkZSBs4oCZYXhlIFhcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGlja1dpZHRoOiAxLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBsaW5lV2lkdGg6IChjdHgpID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIE5lIGRlc3NpbmVyIHF1ZSBsZSBwcmVtaWVyIHRyYWl0XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gY3R4LmluZGV4ID09PSAwID8gMSA6IDA7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgcmlkZUNoYXJ0ID0gbmV3IENoYXJ0KGN0eCwge1xuICAgICAgICAgICAgICAgICAgICB0eXBlOiAnYmFyJyxcbiAgICAgICAgICAgICAgICAgICAgZGF0YToge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGFiZWxzOiBsYWJlbHMsXG4gICAgICAgICAgICAgICAgICAgICAgICBkYXRhc2V0czogW3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ05vbWJyZSBkZSB0cmFqZXQnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGE6IGNvdW50cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBiYWNrZ3JvdW5kQ29sb3I6IGJsdWVCdG5Db2xvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBib3JkZXJDb2xvcjogJ3RyYW5zcGFyZW50JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGdyZWVuQnRuQ29sb3IsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyQ29sb3I6ICd0cmFuc3BhcmVudCcsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyV2lkdGg6IDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiA2LFxuICAgICAgICAgICAgICAgICAgICAgICAgfV1cbiAgICAgICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogY2hhcnRPcHRpb25zXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgXG4gICAgICAgICAgICAgICAgY3JlZGl0c0NoYXJ0ID0gbmV3IENoYXJ0KGN0eDIsIHtcbiAgICAgICAgICAgICAgICAgICAgdHlwZTogJ2JhcicsXG4gICAgICAgICAgICAgICAgICAgIGRhdGE6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGxhYmVsczogbGFiZWxzLFxuICAgICAgICAgICAgICAgICAgICAgICAgZGF0YXNldHM6IFt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YTogY291bnRzQ3JlZGl0cyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBsYWJlbDogJ05vbWJyZSBkZSBjcmVkaXRzJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kQ29sb3I6IGJsdWVCdG5Db2xvcixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXJDb2xvcjogJ3RyYW5zcGFyZW50JyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXJXaWR0aDogMixcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3JkZXJSYWRpdXM6IDYsXG4gICAgICAgICAgICAgICAgICAgICAgICB9XVxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiBjaGFydE9wdGlvbnNcbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgXG4gICAgXG4gICAgfVxuICAgIFxuICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwZXJpb2Qtc2VsZWN0JykuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgKGUpID0+IHtcbiAgICAgICAgZmV0Y2hEYXRhKGUudGFyZ2V0LnZhbHVlKTtcbiAgICB9KTtcbiAgICBcbiAgICAvLyBJbml0aWFsIGxvYWRcbiAgICBmZXRjaERhdGEoNyk7XG4gICAgXG4gICAgZnVuY3Rpb24gYWRqdXN0Q2FudmFzSGVpZ2h0KCkge1xuICAgICAgICBjb25zdCBpc1NtYWxsU2NyZWVuID0gd2luZG93LmlubmVyV2lkdGggPCA1MTI7XG4gICAgICAgIFxuICAgICAgICBjb25zdCBjYW52YXNlcyA9IFtcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9jaGFpbnMtdHJhamV0LWNoYXJ0JyksXG4gICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnY3JlZGl0cy1hLXZlbmlyLWNoYXJ0JylcbiAgICAgICAgXTtcbiAgICBcbiAgICAgICAgY2FudmFzZXMuZm9yRWFjaChjYW52YXMgPT4ge1xuICAgICAgICAgICAgaWYgKGNhbnZhcykge1xuICAgICAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSBpc1NtYWxsU2NyZWVuID8gMzAwIDogMzAwOyAvLyDwn5OPIGFqdXN0ZSBjb21tZSB0dSB2ZXV4XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICAvLyBFeMOpY3V0ZXIgYXUgY2hhcmdlbWVudFxuICAgIGFkanVzdENhbnZhc0hlaWdodCgpO1xuICAgIFxuICAgIC8vIEV4w6ljdXRlciBhdSByZWRpbWVuc2lvbm5lbWVudFxuICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCBhZGp1c3RDYW52YXNIZWlnaHQpO1xufVxuXG5cbmNvbnN0IHNlYXJjaElucHV0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3NlYXJjaC1pbnB1dCcpO1xuXG4vLyBSZWNoZXJjaGUgZW4gZGlyZWN0XG5pZiAoc2VhcmNoSW5wdXQpIHtcbiAgICBjb25zdCBzZWFyY2hCdG4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoLWJ0bicpO1xuICAgIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnc2VhcmNoLWZvcm0nKTtcbiAgICBjb25zdCB1c2Vyc1RhYmxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3VzZXJzLXRhYmxlJyk7XG4gICAgc2VhcmNoSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgIGNvbnN0IHF1ZXJ5ID0gbmV3IFVSTFNlYXJjaFBhcmFtcyhuZXcgRm9ybURhdGEoZm9ybSkpLnRvU3RyaW5nKCk7XG4gICAgICAgIGZldGNoKFwiL2FkbWluL3VzZXJzLWxpc3Q/XCIgKyBxdWVyeSwge1xuICAgICAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICAgICAgICdYLVJlcXVlc3RlZC1XaXRoJzogJ1hNTEh0dHBSZXF1ZXN0J1xuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgICAgICAudGhlbihyZXMgPT4gcmVzLnRleHQoKSlcbiAgICAgICAgLnRoZW4oaHRtbCA9PiB7XG4gICAgICAgICAgICB1c2Vyc1RhYmxlLmlubmVySFRNTCA9IGh0bWw7XG4gICAgICAgIH0pO1xuICAgIH0pO1xuICAgIFxuICAgIC8vIFBhZ2luYXRpb24gQUpBWFxuICAgIHVzZXJzVGFibGUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZSkgPT4ge1xuICAgICAgICBpZiAoZS50YXJnZXQudGFnTmFtZSA9PT0gJ0EnICYmIGUudGFyZ2V0LmNsb3Nlc3QoJy5wYWdpbmF0aW9uJykpIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGZldGNoKGUudGFyZ2V0LmhyZWYsIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdYLVJlcXVlc3RlZC1XaXRoJzogJ1hNTEh0dHBSZXF1ZXN0J1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihyZXMgPT4gcmVzLnRleHQoKSlcbiAgICAgICAgICAgIC50aGVuKGh0bWwgPT4ge1xuICAgICAgICAgICAgICAgIHVzZXJzVGFibGUuaW5uZXJIVE1MID0gaHRtbDtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgdXNlcnNUYWJsZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIChlKSA9PiB7XG4gICAgICAgIGNvbnN0IHJvdyA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5jbGlja2FibGUtcm93Jyk7XG4gICAgICAgIGlmIChyb3cgJiYgcm93LmRhdGFzZXQuaHJlZikge1xuICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSByb3cuZGF0YXNldC5ocmVmO1xuICAgICAgICB9XG4gICAgfSk7XG59XG5cblxuY29uc3QgYWRtaW5FZGl0VXNlckZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRtaW4tZWRpdC11c2VyLWZvcm0nKTtcblxuaWYgKGFkbWluRWRpdFVzZXJGb3JtKSB7XG4gICAgY29uc3QgaW5wdXRzID0gYWRtaW5FZGl0VXNlckZvcm0ucXVlcnlTZWxlY3RvckFsbCgnaW5wdXQsIHNlbGVjdCwgdGV4dGFyZWEnKTtcbiAgICBjb25zdCBlZGl0QnRuID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2FkbWluLWVkaXQtdXNlci1idG4nKTtcblxuICAgIGlucHV0cy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgICBpbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgZWRpdEJ0bi5jbGFzc0xpc3QucmVtb3ZlKCdpbmFjdGl2ZScpO1xuICAgICAgICB9KVxuICAgIH0pXG5cbiAgICBlZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgZnVuY3Rpb24oZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGFkbWluRWRpdFVzZXJGb3JtKTtcblxuICAgICAgICBjb25zdCB1cmxQYXJhbXMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKHdpbmRvdy5sb2NhdGlvbi5zZWFyY2gpO1xuICAgICAgICBjb25zdCBpZCA9IHVybFBhcmFtcy5nZXQoJ2lkJyk7XG5cblxuICAgICAgICBmZXRjaCgnL2FkbWluL3VzZXI/aWQ9JyArIGlkICwge1xuICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICAgICAgICBib2R5OiBmb3JtRGF0YSxcbiAgICAgICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAgICAgICAnWC1SZXF1ZXN0ZWQtV2l0aCc6ICdYTUxIdHRwUmVxdWVzdCcgLy8gaW1wb3J0YW50IHBvdXIgaW5kaXF1ZXIgdW5lIHJlcXXDqnRlIEFKQVhcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSlcbiAgICAgICAgLnRoZW4ocmVzcG9uc2UgPT4ge1xuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRXJyZXVyIHLDqXNlYXUnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgICAgIH0pXG4gICAgICAgIC50aGVuKGRhdGEgPT4ge1xuICAgICAgICAgICAgLy8gZGF0YS5odG1sIGNvbnRpZW50IHRvbiBmb3JtdWxhaXJlIHJlbmR1XG4gICAgXG4gICAgICAgICAgICB0cmVhdEZvcm1BbGVydChhZG1pbkVkaXRVc2VyRm9ybSwgJ0luZm9ybWF0aW9ucyBtaXNlcyDDoCBqb3VyIGF2ZWMgc3VjY8OocycsIGRhdGEpO1xuXG4gICAgICAgICAgICBpZiAoZGF0YS5zdGF0dXMgIT09IFwic3VjY2Vzc1wiKSB7XG4gICAgICAgICAgICAgICAgYWRtaW5FZGl0VXNlckZvcm0ucmVzZXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGNvbnN0IGV2ZW50ID0gbmV3IEV2ZW50KCdpbnB1dCcsIHtcbiAgICAgICAgICAgIC8vICAgICBidWJibGVzOiB0cnVlLFxuICAgICAgICAgICAgLy8gfSk7XG4gICAgICAgICAgICAgIFxuICAgICAgICAgICAgLy8gcGFzc3dvcmRJbnB1dC5kaXNwYXRjaEV2ZW50KGV2ZW50KTtcbiAgICBcbiAgICAgICAgfSlcbiAgICAgICAgLmNhdGNoKGVycm9yID0+IGNvbnNvbGUuZXJyb3IoJ0VycmV1cjonLCBlcnJvcikpO1xuXG4gICAgfSlcblxuICAgIGNvbnN0IHJlc2V0UHJvZmlsUGljdHVyZUJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdyZXNldC11c2VyLXBob3RvLXByb2ZpbC1idG4nKTtcbiAgICBcblxuICAgIGlmIChyZXNldFByb2ZpbFBpY3R1cmVCdG4pIHtcbiAgICAgICAgY29uc3QgcHJvZmlsUGljdHVyZUltZyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcm9maWwtcGljdHVyZS1pbWcnKTtcblxuXG4gICAgICAgIHJlc2V0UHJvZmlsUGljdHVyZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHByb2ZpbFBpY3R1cmVJbWcuc3JjID0gJy9kZWZhdWx0LXByb2ZpbC1waWN0dXJlLnBuZyc7XG5cbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgIGNvbnN0IGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGFkbWluRWRpdFVzZXJGb3JtKTtcbiAgICBcbiAgICAgICAgICAgIGNvbnN0IHVybFBhcmFtcyA9IG5ldyBVUkxTZWFyY2hQYXJhbXMod2luZG93LmxvY2F0aW9uLnNlYXJjaCk7XG4gICAgICAgICAgICBjb25zdCBpZCA9IHVybFBhcmFtcy5nZXQoJ2lkJyk7XG4gICAgXG4gICAgXG4gICAgICAgICAgICBmZXRjaCgnL3VzZXIvcmVzZXQtcGhvdG8tcHJvZmlsP2lkPScgKyBpZCAsIHtcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgICAgICAgICAgICBib2R5OiBmb3JtRGF0YSxcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgICAgICAgICAgICdYLVJlcXVlc3RlZC1XaXRoJzogJ1hNTEh0dHBSZXF1ZXN0JyAvLyBpbXBvcnRhbnQgcG91ciBpbmRpcXVlciB1bmUgcmVxdcOqdGUgQUpBWFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAudGhlbihyZXNwb25zZSA9PiB7XG4gICAgICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0VycmV1ciByw6lzZWF1Jyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS5qc29uKCk7XG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgLnRoZW4oZGF0YSA9PiB7XG4gICAgICAgICAgICAgICAgLy8gZGF0YS5odG1sIGNvbnRpZW50IHRvbiBmb3JtdWxhaXJlIHJlbmR1XG4gICAgICAgIFxuICAgICAgICAgICAgICAgIHRyZWF0Rm9ybUFsZXJ0KGFkbWluRWRpdFVzZXJGb3JtLCAnUGhvdG8gZGUgcHJvZmlsIHLDqWluaXRpYWxpc8OpLicsIGRhdGEpO1xuICAgIFxuICAgICAgICAgICAgICAgIGlmIChkYXRhLnN0YXR1cyAhPT0gXCJzdWNjZXNzXCIpIHtcbiAgICAgICAgICAgICAgICAgICAgYWRtaW5FZGl0VXNlckZvcm0ucmVzZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgcHJvZmlsUGljdHVyZUltZy5zcmMgPSAnL2RlZmF1bHQtcHJvZmlsLXBpY3R1cmUucG5nJ1xuXG4gICAgICAgICAgICAgICAgfVxuICAgIFxuICAgICAgICAgICAgICAgIHJlc2V0UHJvZmlsUGljdHVyZUJ0bi5yZW1vdmUoKTtcbiAgICAgICAgICAgICAgICAvLyBjb25zdCBldmVudCA9IG5ldyBFdmVudCgnaW5wdXQnLCB7XG4gICAgICAgICAgICAgICAgLy8gICAgIGJ1YmJsZXM6IHRydWUsXG4gICAgICAgICAgICAgICAgLy8gfSk7XG4gICAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAvLyBwYXNzd29yZElucHV0LmRpc3BhdGNoRXZlbnQoZXZlbnQpO1xuICAgICAgICBcbiAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5lcnJvcignRXJyZXVyOicsIGVycm9yKSk7XG4gICAgICAgIH0pXG5cbiAgICAgICAgXG4gICAgfVxuXG4gICAgY29uc3QgZGVsZXRlVXNlckJ0biA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdkZWxldGUtdXNlci1idG4nKTtcbiAgICAgICAgY29uc3QgZGVsZXRlVXNlclBvcHVwID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2RlbGV0ZS11c2VyLXBvcHVwJyk7XG5cbiAgICAgICAgZGVsZXRlVXNlckJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICAgIHNob3dQb3B1cChkZWxldGVVc2VyUG9wdXAsICdmbGV4Jyk7XG4gICAgICAgIH0pXG5cbiAgICAgICAgY29uc3QgaGlkZURlbGV0ZVVzZXJQb3B1cEJ0biA9IGRlbGV0ZVVzZXJQb3B1cC5xdWVyeVNlbGVjdG9yKCcuYmFjaycpO1xuXG4gICAgICAgIGhpZGVEZWxldGVVc2VyUG9wdXBCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBmdW5jdGlvbigpIHtcbiAgICAgICAgICAgIGhpZGVQb3B1cChkZWxldGVVc2VyUG9wdXApO1xuICAgICAgICB9KVxuXG59XG5cbmNvbnN0IGFkbWluQWRkRW1wbG95ZUZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnYWRtaW4tYWRkLWVtcGxveWUtZm9ybScpO1xuXG5pZiAoYWRtaW5BZGRFbXBsb3llRm9ybSkge1xuICAgIGNvbnN0IGFkbWluQWRkRW1wbG95ZUZvcm1JbnB1dHMgPSBhZG1pbkFkZEVtcGxveWVGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJ2lucHV0Jyk7XG5cbiAgICBhZG1pbkFkZEVtcGxveWVGb3JtSW5wdXRzLmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgZnVuY3Rpb24oKSB7XG4gICAgICAgICAgICBjaGVja0lucHV0cyhhZG1pbkFkZEVtcGxveWVGb3JtKTtcbiAgICAgICAgfSlcbiAgICB9KVxuICAgIFxufVxuXG4iXSwibmFtZXMiOlsiY2hlY2tJbnB1dHMiLCJoaWRlUG9wdXAiLCJzaG93UG9wdXAiLCJ0cmVhdEZvcm1BbGVydCIsInByb2NoYWluVHJhamVUQ2hhcnQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiZmV0Y2hEYXRhIiwiZGF5cyIsImZldGNoIiwiY29uY2F0IiwidGhlbiIsInJlc3BvbnNlIiwianNvbiIsImRhdGEiLCJsYWJlbHMiLCJ0cmFqZXRzQVZlbmlyIiwibWFwIiwiZCIsImRhdGUiLCJjb3VudHMiLCJjb3VudCIsImxhYmVsc0NyZWRpdHMiLCJjcmVkaXRzQVZlbmlyIiwiY291bnRzQ3JlZGl0cyIsImdyZWVuQmxhY2tDb2xvciIsImdyZWVuTWVkaXVtQ29sb3IiLCJibHVlQnRuQ29sb3IiLCJncmVlbkJ0bkNvbG9yIiwicmlkZUNoYXJ0IiwiZGF0YXNldHMiLCJ1cGRhdGUiLCJjcmVkaXRzQ2hhcnQiLCJjaGFydE9wdGlvbnMiLCJwbHVnaW5zIiwibGVnZW5kIiwiZGlzcGxheSIsImNvbG9yIiwiZm9udCIsImZhbWlseSIsInNpemUiLCJzY2FsZXMiLCJ4IiwidGlja3MiLCJ3ZWlnaHQiLCJncmlkIiwiZHJhd09uQ2hhcnRBcmVhIiwiZHJhd1RpY2tzIiwiYm9yZGVyQ29sb3IiLCJ0aWNrV2lkdGgiLCJsaW5lV2lkdGgiLCJjdHgiLCJpbmRleCIsInkiLCJiZWdpbkF0WmVybyIsInN0ZXBTaXplIiwiY2FsbGJhY2siLCJ2YWx1ZSIsIk51bWJlciIsImlzSW50ZWdlciIsImRyYXdCb3JkZXIiLCJDaGFydCIsInR5cGUiLCJsYWJlbCIsImJhY2tncm91bmRDb2xvciIsImJvcmRlcldpZHRoIiwiYm9yZGVyUmFkaXVzIiwib3B0aW9ucyIsImN0eDIiLCJhZGp1c3RDYW52YXNIZWlnaHQiLCJpc1NtYWxsU2NyZWVuIiwid2luZG93IiwiaW5uZXJXaWR0aCIsImNhbnZhc2VzIiwiZm9yRWFjaCIsImNhbnZhcyIsImhlaWdodCIsImdldENvbnRleHQiLCJhZGRFdmVudExpc3RlbmVyIiwiZSIsInRhcmdldCIsInNlYXJjaElucHV0Iiwic2VhcmNoQnRuIiwiZm9ybSIsInVzZXJzVGFibGUiLCJxdWVyeSIsIlVSTFNlYXJjaFBhcmFtcyIsIkZvcm1EYXRhIiwidG9TdHJpbmciLCJoZWFkZXJzIiwicmVzIiwidGV4dCIsImh0bWwiLCJpbm5lckhUTUwiLCJ0YWdOYW1lIiwiY2xvc2VzdCIsInByZXZlbnREZWZhdWx0IiwiaHJlZiIsInJvdyIsImRhdGFzZXQiLCJsb2NhdGlvbiIsImFkbWluRWRpdFVzZXJGb3JtIiwiaW5wdXRzIiwicXVlcnlTZWxlY3RvckFsbCIsImVkaXRCdG4iLCJpbnB1dCIsImNsYXNzTGlzdCIsInJlbW92ZSIsImZvcm1EYXRhIiwidXJsUGFyYW1zIiwic2VhcmNoIiwiaWQiLCJnZXQiLCJtZXRob2QiLCJib2R5Iiwib2siLCJFcnJvciIsInN0YXR1cyIsInJlc2V0IiwiZXJyb3IiLCJjb25zb2xlIiwicmVzZXRQcm9maWxQaWN0dXJlQnRuIiwicHJvZmlsUGljdHVyZUltZyIsInNyYyIsImRlbGV0ZVVzZXJCdG4iLCJkZWxldGVVc2VyUG9wdXAiLCJoaWRlRGVsZXRlVXNlclBvcHVwQnRuIiwicXVlcnlTZWxlY3RvciIsImFkbWluQWRkRW1wbG95ZUZvcm0iLCJhZG1pbkFkZEVtcGxveWVGb3JtSW5wdXRzIl0sInNvdXJjZVJvb3QiOiIifQ==