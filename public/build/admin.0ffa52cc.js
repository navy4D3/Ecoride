"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[884],{512:(e,t,n)=>{var r=n(28);if(document.getElementById("prochains-trajet-chart")){var a,o,i=function(e){fetch("/admin/stats?days=".concat(e)).then((function(e){return e.json()})).then((function(e){var t=e.trajetsAVenir.map((function(e){return e.date})),n=e.trajetsAVenir.map((function(e){return e.count})),r=e.creditsAVenir.map((function(e){return e.date})),i=e.creditsAVenir.map((function(e){return e.count})),d="#386150";if(a)a.data.labels=t,a.data.datasets[0].data=n,a.update(),o.data.labels=r,o.data.datasets[0].data=i,o.update();else{var u={plugins:{legend:{display:!0,labels:{color:d,font:{family:"Josefin sans",size:18}}}},scales:{x:{ticks:{color:d,font:{family:"Nunito",size:14,weight:"bold"}},grid:{drawOnChartArea:!0,drawTicks:!0,color:d,borderColor:d,tickWidth:1,lineWidth:function(e){return 0===e.index?1:0}}},y:{beginAtZero:!0,ticks:{stepSize:1,callback:function(e){if(Number.isInteger(e))return e},color:d,font:{family:"Nunito",size:14,weight:"bold"}},grid:{drawOnChartArea:!0,drawBorder:!1,drawTicks:!0,display:!0,color:d,tickWidth:1,lineWidth:function(e){return 0===e.index?1:0}}}}};a=new Chart(c,{type:"bar",data:{labels:t,datasets:[{label:"Nombre de trajet",data:n,backgroundColor:"#58fea0",borderColor:"transparent",borderWidth:2,borderRadius:6}]},options:u}),o=new Chart(s,{type:"bar",data:{labels:t,datasets:[{data:i,label:"Nombre de credits",backgroundColor:"#37abc7",borderColor:"transparent",borderWidth:2,borderRadius:6}]},options:u})}}))},d=function(){window.innerWidth;[document.getElementById("prochains-trajet-chart"),document.getElementById("credits-a-venir-chart")].forEach((function(e){e&&(e.height=300)}))},c=document.getElementById("prochains-trajet-chart").getContext("2d"),s=document.getElementById("credits-a-venir-chart").getContext("2d");document.getElementById("period-select").addEventListener("change",(function(e){i(e.target.value)})),i(7),d(),window.addEventListener("resize",d)}var u=document.getElementById("search-input");if(u){document.getElementById("search-btn");var l=document.getElementById("search-form"),f=document.getElementById("users-table");u.addEventListener("input",(function(){var e=new URLSearchParams(new FormData(l)).toString();fetch("/admin/users-list?"+e,{headers:{"X-Requested-With":"XMLHttpRequest"}}).then((function(e){return e.text()})).then((function(e){f.innerHTML=e}))})),f.addEventListener("click",(function(e){"A"===e.target.tagName&&e.target.closest(".pagination")&&(e.preventDefault(),fetch(e.target.href,{headers:{"X-Requested-With":"XMLHttpRequest"}}).then((function(e){return e.text()})).then((function(e){f.innerHTML=e})))})),f.addEventListener("click",(function(e){var t=e.target.closest(".clickable-row");t&&t.dataset.href&&(window.location.href=t.dataset.href)}))}var h=document.getElementById("admin-edit-user-form");if(h){var m=h.querySelectorAll("input, select, textarea"),p=document.getElementById("admin-edit-user-btn");m.forEach((function(e){e.addEventListener("input",(function(){p.classList.remove("inactive")}))})),p.addEventListener("click",(function(e){e.preventDefault();var t=new FormData(h),n=new URLSearchParams(window.location.search).get("id");fetch("/admin/user?id="+n,{method:"POST",body:t,headers:{"X-Requested-With":"XMLHttpRequest"}}).then((function(e){if(!e.ok)throw new Error("Erreur réseau");return e.json()})).then((function(e){(0,r.treatFormAlert)(h,"Informations mises à jour avec succès",e),"success"!==e.status&&h.reset()})).catch((function(e){return console.error("Erreur:",e)}))}));var g=document.getElementById("reset-user-photo-profil-btn");if(g){var v=document.getElementById("profil-picture-img");g.addEventListener("click",(function(e){v.src="/default-profil-picture.png",e.preventDefault();var t=new FormData(h),n=new URLSearchParams(window.location.search).get("id");fetch("/user/reset-photo-profil?id="+n,{method:"POST",body:t,headers:{"X-Requested-With":"XMLHttpRequest"}}).then((function(e){if(!e.ok)throw new Error("Erreur réseau");return e.json()})).then((function(e){(0,r.treatFormAlert)(h,"Photo de profil réinitialisé.",e),"success"!==e.status&&(h.reset(),v.src="/default-profil-picture.png"),g.remove()})).catch((function(e){return console.error("Erreur:",e)}))}))}var b=document.getElementById("delete-user-btn"),E=document.getElementById("delete-user-popup");b.addEventListener("click",(function(e){(0,r.showPopup)(E,"flex")})),E.querySelector(".back").addEventListener("click",(function(){(0,r.hidePopup)(E)}))}var w=document.getElementById("admin-add-employe-form");w&&w.querySelectorAll("input").forEach((function(e){e.addEventListener("input",(function(){(0,r.checkInputs)(w)}))}))}},e=>{e.O(0,[264,28],(()=>{return t=512,e(e.s=t);var t}));e.O()}]);